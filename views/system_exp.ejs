<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Consultorio</title>
    <link rel="stylesheet" href="resources/css/bootstrap.min.css">
    <link rel="stylesheet" href="resources/css/styles.css">
    <link rel="stylesheet" href="resources/css/styles_system.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&family=Quicksand:wght@300&family=Staatliches&display=swap"
        rel="stylesheet">
</head>

<body>

    <header class="contenedor" id="headerInicio">
        <div id="header-pagina">
            <nav>
                <div id="header-logo-dr">
                    <a href="/" id="logo-header">
                        <h2 class="logo">Dr. Raúl Langle Galindo</h2>
                        <span>MEDICO PEDIATRA</span>
                    </a>
                </div>
                <button type="button" id="boton-menu"><i class="fas fa-bars"></i></button>
                <div id="menu-nav">
                    <ul>
                        <li><a href="/system"><i class="fas fa-home"></i> Inicio</a></li>
                        <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main class="main-expedientes">

        <section>

            <div class="top-menu">
                <h1>Expedientes</h1>
            </div>

            <button id="boton-crear-exp" class="boton"><i class="fas fa-folder-plus"></i> Crear un expediente</button>

            <table class="tabla-expedientes">
                <thead>
                    <tr>
                        <th scope="col">Nombre(s)</th>
                        <th scope="col">Apellido Paterno</th>
                        <th scope="col">Apellido Materno</th>
                        <th scope="col">Sexo</th>
                        <th scope="col">Fecha Nacimiento</th>
                        <th scope="col">Funciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% pacientes.forEach( paciente => { %>
                        <tr>
                            <td><%= paciente.nombre %></td>
                            <td><%= paciente.apellido_paterno %></td>
                            <td><%= paciente.apellido_materno %></td>
                            <td><%= paciente.sexo %></td>
                            <td><%= paciente.fecha_nacimiento %></td>
                            <td>
                                <a href="/verExpediente/<%= paciente.id %>" class="btn-delete"><i class="fas fa-eye"></i></a>
                                <a href="/borrarExpediente/<%= paciente.id %>" class="btn-delete"><i class="fas fa-trash-alt"></i></a>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>

        </section>

    </main>

    <div id="popup-exp" class="popup-system">
        <button type="button" id="boton-cerrarCrearExp" class="boton-cerrar"><i
                class="fas fa-window-close"></i></button>
        <div class="exp-paciente div-config">
            <h2 class="sub-title">Crear un expediente</h2>
            <form action="/crearExpediente" id="form-exp" method="post">
                <div>
                    <h3 class="tipo-info-title">Información del paciente</h3>
                    <label for="nombre_paciente">
                        <span>Nombre(s):</span><br>
                        <input type="text" name="nombre_paciente" id="nombre_paciente" required>
                    </label>
                    <label for="apellido_paterno_paciente">
                        <span>Apellido paterno:</span><br>
                        <input type="text" name="apellido_paterno_paciente" id="apellido_paterno_paciente" required>
                    </label>
                    <label for="apellido_materno_paciente">
                        <span>Apellido materno:</span><br>
                        <input type="text" name="apellido_materno_paciente" id="apellido_materno_paciente" required>
                    </label>
                    <label for="sexo_paciente">
                        <span>Sexo:</span><br>
                        <select id="sexo_paciente" name="sexo_paciente" required>
                            <option value="Masculino">Masculino</option>
                            <option value="Femenino">Femenino</option>
                        </select>
                    </label>
                    <label for="fecha_nacimiento">
                        <span>Fecha de nacimiento:</span><br>
                        <input type="date" name="fecha_nacimiento" id="fecha_nacimiento" required>
                    </label>
                    <label for="derechohabiente_paciente">
                        <span>Derechohabiente:</span><br>
                        <select id="derechohabiente_paciente" name="derechohabiente_paciente" required>
                            <option value="Ninguno">Ninguno</option>
                            <option value="IMSS">IMSS</option>
                            <option value="ISSSTE">ISSSTE</option>
                            <option value="ISSSTEP">ISSSTEP</option>
                            <option value="Seguro Popular">Seguro Popular</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </label>
                </div>
                <div>
                    <h3 class="tipo-info-title">Información de la madre</h3>
                    <label for="nombre_madre">
                        <span>Nombre(s):</span><br>
                        <input type="text" name="nombre_madre" id="nombre_madre" required>
                    </label>
                    <label for="apellido_paterno_madre">
                        <span>Apellido paterno:</span><br>
                        <input type="text" name="apellido_paterno_madre" id="apellido_paterno_madre" required>
                    </label>
                    <label for="apellido_materno_madre">
                        <span>Apellido materno:</span><br>
                        <input type="text" name="apellido_materno_madre" id="apellido_materno_madre" required>
                    </label>
                    <label for="edad_madre">
                        <span>Edad:</span><br>
                        <input type="number" name="edad_madre" id="edad_madre" required>
                    </label>
                    <label for="grupo_sanguineo_madre">
                        <span>Grupo sanguineo:</span><br>
                        <select name="grupo_sanguineo_madre" id="grupo_sanguineo_madre" required>
                            <option value="O-">O-</option>
                            <option value="O+">O+</option>
                            <option value="A-">A-</option>
                            <option value="A+">A+</option>
                            <option value="B-">B-</option>
                            <option value="B+">B+</option>
                            <option value="AB-">AB-</option>
                            <option value="AB+">AB+</option>
                        </select>
                    </label>
                    <label for="ocupacion_madre">
                        <span>Ocupacion:</span><br>
                        <input type="text" name="ocupacion_madre" id="ocupacion_madre" required>
                    </label>
                    <label for="enfermedad_madre">
                        <span>¿Tiene alguna enfermedad?</span><br>
                        <input type="text" name="enfermedad_madre" id="enfermedad_madre" required>
                    </label>
                    <label for="antecedentes_madre">
                        <span>
                            ¿Tiene antecedentes heredofamiliares?<br>(Diabetes, Hipertension, Asma, Epilepsia, Obesidad,
                            Infartos al corazon, Cancer, Insuficiencia Renal, Malformaciones, Drogas, etc..).
                        </span><br>
                        <input type="text" name="antecedentes_madre" id="antecedentes_madre" required>
                    </label>
                    <label for="embarazos_madre">
                        <span>¿Cuantos embarazos ha tenido?</span><br>
                        <input type="number" name="embarazos_madre" id="embarazos_madre" required>
                    </label>
                    <label for="partos_madre">
                        <span>¿Cuantos partos ha tenido?</span><br>
                        <input type="number" name="partos_madre" id="partos_madre" required>
                    </label>
                    <label for="cesareas_madre">
                        <span>¿Cuantas cesareas ha tenido?</span><br>
                        <input type="number" name="cesareas_madre" id="cesareas_madre" required>
                    </label>
                    <label for="abortos_madre">
                        <span>¿Cuantos abortos ha tenido?</span><br>
                        <input type="number" name="abortos_madre" id="abortos_madre" required>
                    </label>
                </div>
                <div>
                    <h3 class="tipo-info-title">Información del padre</h3>
                    <label for="nombre_padre">
                        <span>Nombre(s):</span><br>
                        <input type="text" name="nombre_padre" id="nombre_padre" required>
                    </label>
                    <label for="apellido_paterno_padre">
                        <span>Apellido paterno:</span><br>
                        <input type="text" name="apellido_paterno_padre" id="apellido_paterno_padre" required>
                    </label>
                    <label for="apellido_materno_padre"><br>
                        <span>Apellido materno:</span><br>
                        <input type="text" name="apellido_materno_padre" id="apellido_materno_padre" required>
                    </label>
                    <label for="edad_padre">
                        <span>Edad:</span><br>
                        <input type="number" name="edad_padre" id="edad_padre" required>
                    </label>
                    <label for="grupo_sanguineo_padre">
                        <span>Grupo sanguineo:</span><br>
                        <select name="grupo_sanguineo_padre" id="grupo_sanguineo_padre" required>
                            <option value="O-">O-</option>
                            <option value="O+">O+</option>
                            <option value="A-">A-</option>
                            <option value="A+">A+</option>
                            <option value="B-">B-</option>
                            <option value="B+">B+</option>
                            <option value="AB-">AB-</option>
                            <option value="AB+">AB+</option>
                        </select>
                    </label>
                    <label for="ocupacion_padre">
                        <span>Ocupacion:</span><br>
                        <input type="text" name="ocupacion_padre" id="ocupacion_padre" required>
                    </label>
                    <label for="enfermedad_padre">
                        <span>¿Tiene alguna enfermedad?</span><br>
                        <input type="text" name="enfermedad_padre" id="enfermedad_padre" required>
                    </label>
                    <label for="antecedentes_padre">
                        <span>
                            ¿Tiene antecedentes heredofamiliares?<br>(Diabetes, Hipertension, Asma, Epilepsia, Obesidad,
                            Infartos al corazon, Cancer, Insuficiencia Renal, Malformaciones, Drogas, etc..).
                        </span><br>
                        <input type="text" name="antecedentes_padre" id="antecedentes_padre" required>
                    </label>
                </div>
                <div>
                    <h3 class="tipo-info-title">Información de contacto</h3>
                    <label for="domicilio_paciente">
                        <span>Domicilio: </span><br>
                        <input type="text" name="domicilio_paciente" id="domicilio_paciente" required>
                    </label>
                    <label for="municipio_paciente">
                        <span>Municipio:</span><br>
                        <input type="text" name="municipio_paciente" id="municipio_paciente" required>
                    </label>
                    <label for="estado_paciente">
                        <span>Estado:</span><br>
                        <input type="text" name="estado_paciente" id="estado_paciente" required>
                    </label>
                    <label for="telefono_paciente">
                        <span>Telefono:</span><br>
                        <input type="text" name="telefono_paciente" id="telefono_paciente" required>
                    </label>
                    <label for="correo_paciente">
                        <span>Correo electronico:</span><br>
                        <input type="email" name="correo_paciente" id="correo_paciente">
                    </label>
                    <label for="familiar_paciente">
                        <span>Nombre de otro familiar responsable: (Opcional)</span><br>
                        <input type="text" name="familiar_paciente" id="familiar_paciente">
                    </label>
                </div>
                <div class="btn-centrado">
                    <button type="submit" id="submit-expediente" class="boton">Crear expediente</button>
                </div>
            </form>
        </div>
    </div>

    <footer id="page-footer" class="contenedor">
        <div>
            <p>
                Copyright <i class="fas fa-copyright"></i>
                2020. Todos los
                derechos reservados
            </p>
        </div>
    </footer>

    <!--Usaremos sweet alert para las alertas-->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!--Esto nos permite especificar codigo para el ejs y sweet alert-->
    <% if(typeof alert !="undefined" ) { %>
        <script>
            Swal.fire({
                title: '<%= alertTitle %>',
                text: '<%= alertMessage %>',
                icon: '<%= alertIcon %>',
                showConfirmButton: <%= showConfirmButton %>,
                timer: <%= timer %>
            }).then(() => {
                    window.location = '/<%= ruta %>'
                })
        </script>
        <% } %>

            <script type="module" src="resources/js/script.js"></script>
            <script type="module" src="resources/js/script-exp.js"></script>

</body>

</html>